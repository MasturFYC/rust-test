import{s as me,f as V,l as P,g as H,h as ue,m as z,d as g,i as h,C as ce,n as Y,O as M,p as j,J as F,G as Ue,a as R,e as O,c as U,j as pe,V as Me,I as Pe,T as ze,K as se,o as Ce,U as Be}from"../chunks/scheduler.a4f235b2.js";import{S as _e,i as $e,f as K,b as y,d as w,m as v,a as _,t as $,e as D,g as W,c as X}from"../chunks/index.bd871e0a.js";import{u as ye}from"../chunks/Close.925834a2.js";import{C as he,T as Ie,D as je,P as Fe}from"../chunks/DeleteRelation.7e03cf5b.js";import{G as we,R as Qe,b as be}from"../chunks/Row.d2ac7eba.js";import{F as Ke}from"../chunks/FluidForm.3544e16e.js";import{S as Le,M as Oe,I as Ae,a as Ge,T as Je,c as Ve,N as He,d as We,u as Xe,b as ge,e as Ye}from"../chunks/Delete.6f0a3216.js";import{T as le,B as Ne}from"../chunks/TextInput.b52bdd72.js";import{c as oe,b as Ze}from"../chunks/index.eacf8113.js";function ve(i){let t,r;return{c(){t=P(i[0]),r=P(" - ")},l(e){t=z(e,i[0]),r=z(e," - ")},m(e,n){h(e,t,n),h(e,r,n)},p(e,n){n&1&&Y(t,e[0])},d(e){e&&(g(t),g(r))}}}function De(i){let t,r;return{c(){t=P(", "),r=P(i[2])},l(e){t=z(e,", "),r=z(e,i[2])},m(e,n){h(e,t,n),h(e,r,n)},p(e,n){n&4&&Y(r,e[2])},d(e){e&&(g(t),g(r))}}}function xe(i){let t,r,e=i[0]!==""&&ve(i),n=i[2]!==""&&De(i);return{c(){t=V("span"),e&&e.c(),r=P(i[1]),n&&n.c()},l(s){t=H(s,"SPAN",{});var a=ue(t);e&&e.l(a),r=z(a,i[1]),n&&n.l(a),a.forEach(g)},m(s,a){h(s,t,a),e&&e.m(t,null),ce(t,r),n&&n.m(t,null)},p(s,[a]){s[0]!==""?e?e.p(s,a):(e=ve(s),e.c(),e.m(t,r)):e&&(e.d(1),e=null),a&2&&Y(r,s[1]),s[2]!==""?n?n.p(s,a):(n=De(s),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:M,o:M,d(s){s&&g(t),e&&e.d(),n&&n.d()}}}function et(i,t,r){let{street:e=""}=t,{city:n}=t,{phone:s=""}=t;return i.$$set=a=>{"street"in a&&r(0,e=a.street),"city"in a&&r(1,n=a.city),"phone"in a&&r(2,s=a.phone)},[e,n,s]}class tt extends _e{constructor(t){super(),$e(this,t,et,xe,me,{street:0,city:1,phone:2})}}function Te(i,t,r){const e=i.slice();return e[18]=t[r],e}function nt(i){let t,r,e;function n(...a){return i[11](i[18],...a)}function s(...a){return i[12](i[18],...a)}return t=new he({props:{labelText:i[18].value,checked:i[1].relationType.filter(n).length>0}}),t.$on("check",s),{c(){y(t.$$.fragment),r=R()},l(a){w(t.$$.fragment,a),r=U(a)},m(a,o){v(t,a,o),h(a,r,o),e=!0},p(a,o){i=a;const l={};o&2&&(l.checked=i[1].relationType.filter(n).length>0),t.$set(l)},i(a){e||(_(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){a&&g(r),D(t,a)}}}function Se(i){let t,r;return t=new be({props:{$$slots:{default:[nt]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&2097154&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function at(i){let t,r,e=ye(i[6]),n=[];for(let a=0;a<e.length;a+=1)n[a]=Se(Te(i,e,a));const s=a=>$(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=O()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);t=O()},m(a,o){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,o);h(a,t,o),r=!0},p(a,o){if(o&66){e=ye(a[6]);let l;for(l=0;l<e.length;l+=1){const c=Te(a,e,l);n[l]?(n[l].p(c,o),_(n[l],1)):(n[l]=Se(c),n[l].c(),_(n[l],1),n[l].m(t.parentNode,t))}for(W(),l=e.length;l<n.length;l+=1)s(l);X()}},i(a){if(!r){for(let o=0;o<e.length;o+=1)_(n[o]);r=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)$(n[o]);r=!1},d(a){a&&g(t),Me(n,a)}}}function rt(i){let t,r;return t=new Qe({props:{$$slots:{default:[at]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&2097154&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function it(i){let t,r,e;function n(a){i[13](a)}let s={labelText:"? Khusus"};return i[1].isSpecial!==void 0&&(s.checked=i[1].isSpecial),t=new he({props:s}),j.push(()=>K(t,"checked",n)),{c(){y(t.$$.fragment)},l(a){w(t.$$.fragment,a)},m(a,o){v(t,a,o),e=!0},p(a,o){const l={};!r&&o&2&&(r=!0,l.checked=a[1].isSpecial,F(()=>r=!1)),t.$set(l)},i(a){e||(_(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){D(t,a)}}}function st(i){let t,r,e;function n(a){i[14](a)}let s={labelText:"? Aktif"};return i[1].isActive!==void 0&&(s.checked=i[1].isActive),t=new he({props:s}),j.push(()=>K(t,"checked",n)),{c(){y(t.$$.fragment)},l(a){w(t.$$.fragment,a)},m(a,o){v(t,a,o),e=!0},p(a,o){const l={};!r&&o&2&&(r=!0,l.checked=a[1].isActive,F(()=>r=!1)),t.$set(l)},i(a){e||(_(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){D(t,a)}}}function lt(i){let t,r,e,n;return t=new be({props:{$$slots:{default:[it]},$$scope:{ctx:i}}}),e=new be({props:{$$slots:{default:[st]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment),r=R(),y(e.$$.fragment)},l(s){w(t.$$.fragment,s),r=U(s),w(e.$$.fragment,s)},m(s,a){v(t,s,a),h(s,r,a),v(e,s,a),n=!0},p(s,a){const o={};a&2097154&&(o.$$scope={dirty:a,ctx:s}),t.$set(o);const l={};a&2097154&&(l.$$scope={dirty:a,ctx:s}),e.$set(l)},i(s){n||(_(t.$$.fragment,s),_(e.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),$(e.$$.fragment,s),n=!1},d(s){s&&g(r),D(t,s),D(e,s)}}}function ot(i){let t,r;return t=new Qe({props:{$$slots:{default:[lt]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&2097154&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function ft(i){let t,r,e,n,s,a,o,l,c,m,S,p,b,Q,A,C,q,B,N,L;function d(f){i[7](f)}let I={id:"rel-name",labelText:i[1].id===""?"Nama":i[1].id,placeholder:"Junaedi",required:!0};i[1].name!==void 0&&(I.value=i[1].name),t=new le({props:I}),j.push(()=>K(t,"value",d));function J(f){i[8](f)}let G={labelText:"Alamat",placeholder:"e.g. Jl. Graha Sudirman Blok Acasia-4 No. 11 Kel. Lemahmekar"};i[1].street!==void 0&&(G.value=i[1].street),n=new le({props:G}),j.push(()=>K(n,"value",J));function Z(f){i[9](f)}let ee={labelText:"Kota",placeholder:"Indramayu",size:"sm"};i[1].city!==void 0&&(ee.value=i[1].city),o=new le({props:ee}),j.push(()=>K(o,"value",Z));function de(f){i[10](f)}let te={labelText:"Telepon/mobile",placeholder:"08999998347",size:"sm"};return i[1].phone!==void 0&&(te.value=i[1].phone),m=new le({props:te}),j.push(()=>K(m,"value",de)),A=new we({props:{noGutter:!0,$$slots:{default:[rt]},$$scope:{ctx:i}}}),N=new we({props:{noGutterLeft:!0,$$slots:{default:[ot]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment),e=R(),y(n.$$.fragment),a=R(),y(o.$$.fragment),c=R(),y(m.$$.fragment),p=R(),b=V("div"),Q=R(),y(A.$$.fragment),C=R(),q=V("div"),B=R(),y(N.$$.fragment),this.h()},l(f){w(t.$$.fragment,f),e=U(f),w(n.$$.fragment,f),a=U(f),w(o.$$.fragment,f),c=U(f),w(m.$$.fragment,f),p=U(f),b=H(f,"DIV",{class:!0}),ue(b).forEach(g),Q=U(f),w(A.$$.fragment,f),C=U(f),q=H(f,"DIV",{class:!0}),ue(q).forEach(g),B=U(f),w(N.$$.fragment,f),this.h()},h(){pe(b,"class","divider svelte-16z2047"),pe(q,"class","divider svelte-16z2047")},m(f,T){v(t,f,T),h(f,e,T),v(n,f,T),h(f,a,T),v(o,f,T),h(f,c,T),v(m,f,T),h(f,p,T),h(f,b,T),h(f,Q,T),v(A,f,T),h(f,C,T),h(f,q,T),h(f,B,T),v(N,f,T),L=!0},p(f,T){const x={};T&2&&(x.labelText=f[1].id===""?"Nama":f[1].id),!r&&T&2&&(r=!0,x.value=f[1].name,F(()=>r=!1)),t.$set(x);const ne={};!s&&T&2&&(s=!0,ne.value=f[1].street,F(()=>s=!1)),n.$set(ne);const ae={};!l&&T&2&&(l=!0,ae.value=f[1].city,F(()=>l=!1)),o.$set(ae);const re={};!S&&T&2&&(S=!0,re.value=f[1].phone,F(()=>S=!1)),m.$set(re);const ie={};T&2097154&&(ie.$$scope={dirty:T,ctx:f}),A.$set(ie);const u={};T&2097154&&(u.$$scope={dirty:T,ctx:f}),N.$set(u)},i(f){L||(_(t.$$.fragment,f),_(n.$$.fragment,f),_(o.$$.fragment,f),_(m.$$.fragment,f),_(A.$$.fragment,f),_(N.$$.fragment,f),L=!0)},o(f){$(t.$$.fragment,f),$(n.$$.fragment,f),$(o.$$.fragment,f),$(m.$$.fragment,f),$(A.$$.fragment,f),$(N.$$.fragment,f),L=!1},d(f){f&&(g(e),g(a),g(c),g(p),g(b),g(Q),g(C),g(q),g(B)),D(t,f),D(n,f),D(o,f),D(m,f),D(A,f),D(N,f)}}}function Ee(i){let t,r;return t=new Ae({props:{status:"active",description:i[1].id===""?"Posting data...":"Updating data..."}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&2&&(s.description=e[1].id===""?"Posting data...":"Updating data..."),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function qe(i){let t,r;return t=new Ae({props:{description:i[4],status:"error"}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&16&&(s.description=e[4]),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function ut(i){let t,r,e,n,s;t=new Ke({props:{$$slots:{default:[ft]},$$scope:{ctx:i}}});let a=i[3]&&Ee(i),o=i[2]&&qe(i);return{c(){y(t.$$.fragment),r=R(),a&&a.c(),e=R(),o&&o.c(),n=O()},l(l){w(t.$$.fragment,l),r=U(l),a&&a.l(l),e=U(l),o&&o.l(l),n=O()},m(l,c){v(t,l,c),h(l,r,c),a&&a.m(l,c),h(l,e,c),o&&o.m(l,c),h(l,n,c),s=!0},p(l,c){const m={};c&2097154&&(m.$$scope={dirty:c,ctx:l}),t.$set(m),l[3]?a?(a.p(l,c),c&8&&_(a,1)):(a=Ee(l),a.c(),_(a,1),a.m(e.parentNode,e)):a&&(W(),$(a,1,1,()=>{a=null}),X()),l[2]?o?(o.p(l,c),c&4&&_(o,1)):(o=qe(l),o.c(),_(o,1),o.m(n.parentNode,n)):o&&(W(),$(o,1,1,()=>{o=null}),X())},i(l){s||(_(t.$$.fragment,l),_(a),_(o),s=!0)},o(l){$(t.$$.fragment,l),$(a),$(o),s=!1},d(l){l&&(g(r),g(e),g(n)),D(t,l),a&&a.d(l),o&&o.d(l)}}}function ct(i){let t,r,e;function n(a){i[15](a)}let s={hasForm:!0,preventCloseOnClickOutside:!0,modalHeading:"Relasi",primaryButtonText:"Simpan",primaryButtonIcon:Le,secondaryButtonText:"Batal",selectorPrimaryFocus:"#rel-name",size:"sm",primaryButtonDisabled:i[3],$$slots:{default:[ut]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.open=i[0]),t=new Oe({props:s}),j.push(()=>K(t,"open",n)),t.$on("click:button--secondary",i[16]),t.$on("click:button--primary",i[5]),{c(){y(t.$$.fragment)},l(a){w(t.$$.fragment,a)},m(a,o){v(t,a,o),e=!0},p(a,[o]){const l={};o&8&&(l.primaryButtonDisabled=a[3]),o&2097182&&(l.$$scope={dirty:o,ctx:a}),!r&&o&1&&(r=!0,l.open=a[0],F(()=>r=!1)),t.$set(l)},i(a){e||(_(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){D(t,a)}}}function pt(i,t,r){let{open:e=!1}=t,{data:n}=t,{isError:s=!1}=t,{isUpdating:a=!1}=t,{errorMessage:o=""}=t;const l=Ue();function c(){l("submit",n)}let m=[{id:"Member",value:"Member"},{id:"Customer",value:"Pelanggan"},{id:"Supplier",value:"Supplier"},{id:"Sales",value:"Sales"},{id:"Employee",value:"Karyawan"}];function S(d){i.$$.not_equal(n.name,d)&&(n.name=d,r(1,n))}function p(d){i.$$.not_equal(n.street,d)&&(n.street=d,r(1,n))}function b(d){i.$$.not_equal(n.city,d)&&(n.city=d,r(1,n))}function Q(d){i.$$.not_equal(n.phone,d)&&(n.phone=d,r(1,n))}const A=(d,I)=>I===d.id,C=(d,I)=>{if(I.detail)r(1,n={...n,relationType:[...n.relationType,d.id]});else{const J=n.relationType.filter(G=>G!==d.id);r(1,n={...n,relationType:[...J]})}};function q(d){i.$$.not_equal(n.isSpecial,d)&&(n.isSpecial=d,r(1,n))}function B(d){i.$$.not_equal(n.isActive,d)&&(n.isActive=d,r(1,n))}function N(d){e=d,r(0,e)}const L=()=>r(0,e=!1);return i.$$set=d=>{"open"in d&&r(0,e=d.open),"data"in d&&r(1,n=d.data),"isError"in d&&r(2,s=d.isError),"isUpdating"in d&&r(3,a=d.isUpdating),"errorMessage"in d&&r(4,o=d.errorMessage)},[e,n,s,a,o,c,m,S,p,b,Q,A,C,q,B,N,L]}class mt extends _e{constructor(t){super(),$e(this,t,pt,ct,me,{open:0,data:1,isError:2,isUpdating:3,errorMessage:4})}}function _t(i){let t;return{c(){t=P("Buat baru")},l(r){t=z(r,"Buat baru")},m(r,e){h(r,t,e)},d(r){r&&g(t)}}}function $t(i){let t,r,e,n;return t=new Ie({}),e=new Ne({props:{icon:He,$$slots:{default:[_t]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){y(t.$$.fragment),r=R(),y(e.$$.fragment)},l(s){w(t.$$.fragment,s),r=U(s),w(e.$$.fragment,s)},m(s,a){v(t,s,a),h(s,r,a),v(e,s,a),n=!0},p(s,a){const o={};a&1024&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(_(t.$$.fragment,s),_(e.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),$(e.$$.fragment,s),n=!1},d(s){s&&g(r),D(t,s),D(e,s)}}}function dt(i){let t,r;return t=new Ve({props:{$$slots:{default:[$t]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&1024&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function gt(i){let t,r;return t=new Je({props:{size:"sm",$$slots:{default:[dt]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&1024&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function bt(i){let t=i[9].value+"",r;return{c(){r=P(t)},l(e){r=z(e,t)},m(e,n){h(e,r,n)},p(e,n){n&512&&t!==(t=e[9].value+"")&&Y(r,t)},i:M,o:M,d(e){e&&g(r)}}}function ht(i){let t=i[9].value.join(", ")+"",r;return{c(){r=P(t)},l(e){r=z(e,t)},m(e,n){h(e,r,n)},p(e,n){n&512&&t!==(t=e[9].value.join(", ")+"")&&Y(r,t)},i:M,o:M,d(e){e&&g(r)}}}function kt(i){let t,r;return t=new tt({props:{street:i[8].street,city:i[8].city,phone:i[8].phone}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,n){const s={};n&256&&(s.street=e[8].street),n&256&&(s.city=e[8].city),n&256&&(s.phone=e[8].phone),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function yt(i){let t,r,e,n;function s(){return i[4](i[8])}return t=new Ne({props:{tooltipPosition:"left",tooltipAlignment:"end",size:"small",kind:"ghost",iconDescription:"Edit",icon:We}}),t.$on("click",s),e=new je({props:{idData:i[8].id,isDeleting:i[1]}}),e.$on("deleteData",i[5]),{c(){y(t.$$.fragment),r=R(),y(e.$$.fragment)},l(a){w(t.$$.fragment,a),r=U(a),w(e.$$.fragment,a)},m(a,o){v(t,a,o),h(a,r,o),v(e,a,o),n=!0},p(a,o){i=a;const l={};o&256&&(l.idData=i[8].id),o&2&&(l.isDeleting=i[1]),e.$set(l)},i(a){n||(_(t.$$.fragment,a),_(e.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),$(e.$$.fragment,a),n=!1},d(a){a&&g(r),D(t,a),D(e,a)}}}function wt(i){let t,r,e,n;const s=[yt,kt,ht,bt],a=[];function o(l,c){return l[9].key==="cmd"?0:l[9].key==="street"?1:l[9].key==="relationType"?2:3}return t=o(i),r=a[t]=s[t](i),{c(){r.c(),e=O()},l(l){r.l(l),e=O()},m(l,c){a[t].m(l,c),h(l,e,c),n=!0},p(l,c){let m=t;t=o(l),t===m?a[t].p(l,c):(W(),$(a[m],1,1,()=>{a[m]=null}),X(),r=a[t],r?r.p(l,c):(r=a[t]=s[t](l),r.c()),_(r,1),r.m(e.parentNode,e))},i(l){n||(_(r),n=!0)},o(l){$(r),n=!1},d(l){l&&g(e),a[t].d(l)}}}function vt(i){let t,r;return t=new Ge({props:{zebra:!0,size:"short",title:"Relasi",description:"Tabel data pelanggan, sales, supplier, dan karyawan",headers:i[2],rows:i[0],$$slots:{cell:[wt,({row:e,cell:n})=>({8:e,9:n}),({row:e,cell:n})=>(e?256:0)|(n?512:0)],default:[gt]},$$scope:{ctx:i}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,n){v(t,e,n),r=!0},p(e,[n]){const s={};n&1&&(s.rows=e[0]),n&1794&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){$(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function Dt(i,t,r){const e=Ue();let{data:n=[]}=t,{isUpdating:s=!1}=t,a=[{key:"name",value:"Nama",width:"25%"},{key:"street",value:"Alamat",width:"auto"},{key:"relationType",value:"Tipe",width:"100px"},{key:"cmd",value:"",width:"120px"}];function o(S){e("edit",S)}const l=S=>o(S.id);function c(S){Pe.call(this,i,S)}const m=()=>o("");return i.$$set=S=>{"data"in S&&r(0,n=S.data),"isUpdating"in S&&r(1,s=S.isUpdating)},[n,s,a,o,l,c,m]}class Tt extends _e{constructor(t){super(),$e(this,t,Dt,vt,me,{data:0,isUpdating:1})}}function Re(i){let t,r,e;function n(a){i[15](a)}let s={data:i[5],errorMessage:i[3]};return i[4]!==void 0&&(s.open=i[4]),t=new mt({props:s}),j.push(()=>K(t,"open",n)),t.$on("submit",i[12]),{c(){y(t.$$.fragment)},l(a){w(t.$$.fragment,a)},m(a,o){v(t,a,o),e=!0},p(a,o){const l={};o[0]&32&&(l.data=a[5]),o[0]&8&&(l.errorMessage=a[3]),!r&&o[0]&16&&(r=!0,l.open=a[4],F(()=>r=!1)),t.$set(l)},i(a){e||(_(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){D(t,a)}}}function St(i){let t,r,e,n,s;function a(l){i[16](l)}let o={data:i[6].data.data};return i[2]!==void 0&&(o.isUpdating=i[2]),t=new Tt({props:o}),j.push(()=>K(t,"isUpdating",a)),t.$on("edit",i[11]),t.$on("deleteData",i[13]),n=new Fe({props:{totalItems:i[6].data.totalItems,pageSizes:i[7],pageSize:i[0],page:i[1]}}),n.$on("update",i[17]),n.$on("click:button--next",i[18]),n.$on("click:button--previous",i[19]),{c(){y(t.$$.fragment),e=R(),y(n.$$.fragment)},l(l){w(t.$$.fragment,l),e=U(l),w(n.$$.fragment,l)},m(l,c){v(t,l,c),h(l,e,c),v(n,l,c),s=!0},p(l,c){const m={};c[0]&64&&(m.data=l[6].data.data),!r&&c[0]&4&&(r=!0,m.isUpdating=l[2],F(()=>r=!1)),t.$set(m);const S={};c[0]&64&&(S.totalItems=l[6].data.totalItems),c[0]&1&&(S.pageSize=l[0]),c[0]&2&&(S.page=l[1]),n.$set(S)},i(l){s||(_(t.$$.fragment,l),_(n.$$.fragment,l),s=!0)},o(l){$(t.$$.fragment,l),$(n.$$.fragment,l),s=!1},d(l){l&&g(e),D(t,l),D(n,l)}}}function Et(i){let t,r,e=i[6].error.message+"",n;return{c(){t=V("span"),r=P("Error: "),n=P(e)},l(s){t=H(s,"SPAN",{});var a=ue(t);r=z(a,"Error: "),n=z(a,e),a.forEach(g)},m(s,a){h(s,t,a),ce(t,r),ce(t,n)},p(s,a){a[0]&64&&e!==(e=s[6].error.message+"")&&Y(n,e)},i:M,o:M,d(s){s&&g(t)}}}function qt(i){let t,r="Loading...";return{c(){t=V("span"),t.textContent=r},l(e){t=H(e,"SPAN",{"data-svelte-h":!0}),Be(t)!=="svelte-omrbt4"&&(t.textContent=r)},m(e,n){h(e,t,n)},p:M,i:M,o:M,d(e){e&&g(t)}}}function Rt(i){let t,r,e,n,s,a,o,l=i[4]&&Re(i);const c=[qt,Et,St],m=[];function S(p,b){return p[6].isLoading?0:p[6].isError?1:p[6].isSuccess?2:-1}return~(n=S(i))&&(s=m[n]=c[n](i)),{c(){t=V("meta"),r=R(),l&&l.c(),e=R(),s&&s.c(),a=O(),this.h()},l(p){const b=ze("svelte-l591zo",document.head);t=H(b,"META",{name:!0,content:!0}),b.forEach(g),r=U(p),l&&l.l(p),e=U(p),s&&s.l(p),a=O(),this.h()},h(){document.title="Relasi",pe(t,"name","description"),pe(t,"content","Relation this app")},m(p,b){ce(document.head,t),h(p,r,b),l&&l.m(p,b),h(p,e,b),~n&&m[n].m(p,b),h(p,a,b),o=!0},p(p,b){p[4]?l?(l.p(p,b),b[0]&16&&_(l,1)):(l=Re(p),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(W(),$(l,1,1,()=>{l=null}),X());let Q=n;n=S(p),n===Q?~n&&m[n].p(p,b):(s&&(W(),$(m[Q],1,1,()=>{m[Q]=null}),X()),~n?(s=m[n],s?s.p(p,b):(s=m[n]=c[n](p),s.c()),_(s,1),s.m(a.parentNode,a)):s=null)},i(p){o||(_(l),_(s),o=!0)},o(p){$(l),$(s),o=!1},d(p){p&&(g(r),g(e),g(a)),g(t),l&&l.d(p),~n&&m[n].d(p)}}}let fe="relations";function Ut(i,t,r){let e,n,s,a,o;const l=`${Ze}/relations`;let c=5,m=1,S=[3,5,10,25,50];const p=Xe();let b=!1,Q="";async function A(u){{const k={headers:{"content-type":"application/json"},method:"GET",credentials:oe},E=new Request(`${l}?page=${u}&limit=${c}`,k);return await(await fetch(E)).json()}}const C=u=>{m<u.totalPages&&p.prefetchQuery([fe,m+1,c],()=>A(m+1))};let q=!1,B={id:"",name:"",city:"",isActive:!0,isSpecial:!1,relationType:["Customer"],createdAt:"",updatedAt:""};const N=async u=>{const k=new Request(l,{headers:{"content-type":"application/json"},body:JSON.stringify(u),method:"POST",credentials:oe});return await(await fetch(k)).json()},L=async u=>{const k=new Request(`${l}/${u.id}`,{headers:{"content-type":"application/json"},body:JSON.stringify(u),method:"PUT",credentials:oe});return await(await fetch(k)).json()},d=async u=>{const k=new Request(`${l}/${u}`,{method:"DELETE",credentials:oe});return await(await fetch(k)).json()},I=ge(N,{onMutate:async u=>{await p.cancelQueries();const k=p.getQueryData(e);return k&&p.setQueryData(e,k),k},onSuccess:async(u,k,E)=>{E&&(r(2,b=!1),u.status!=="fail"?r(4,q=!1):r(3,Q=u.message))},onError:(u,k,E)=>{console.log(u),E!=null&&E.previousData&&p.setQueryData(e,E.previousData)},onSettled:async()=>{await p.invalidateQueries(e)}});se(i,I,u=>r(25,a=u));const J=ge(L,{onMutate:async u=>{await p.cancelQueries();const k=p.getQueryData(e);return k&&p.setQueryData(e,k),k},onSuccess:async(u,k,E)=>{E&&(r(2,b=!1),u.status!=="fail"?r(4,q=!1):r(3,Q=u.message))},onError:(u,k,E)=>{E!=null&&E.previousRelation&&p.setQueryData(e,E.previousRelation)},onSettled:async()=>{await p.invalidateQueries(e)}});se(i,J,u=>r(24,s=u));const G=ge(d,{onMutate:async u=>{await p.cancelQueries();const k=p.getQueryData(e);return k&&p.setQueryData(e,k),k},onSuccess:async()=>{r(2,b=!1)},onError:(u,k,E)=>{E!=null&&E.previousRelation&&p.setQueryData(e,E.previousRelation)},onSettled:async u=>{u.status==="fail"&&r(3,Q=u.message),await p.invalidateQueries(e),r(2,b=!1)}});se(i,G,u=>r(23,n=u));let Z={...B};function ee(u){var k;if(u.detail==="")r(5,Z={...B}),r(4,q=!0);else{let E=(k=o.data)==null?void 0:k.data.filter(ke=>ke.id===u.detail)[0];E&&(r(5,Z=E),r(4,q=!0))}}function de(u){r(2,b=!0),u.detail.id===""?a.mutate(u.detail):s.mutate(u.detail)}function te(u){n.mutate(u.detail)}const f=Ye({queryKey:[fe,m,c],keepPreviousData:!0,enabled:!1,queryFn:async()=>await A(m),onSuccess:C});se(i,f,u=>r(6,o=u)),Ce(async()=>{f.setEnabled(!0)});function T(u,k){f.setOptions({queryKey:[fe,u,k],keepPreviousData:!0,queryFn:async()=>await A(m),onSuccess:C})}function x(u){q=u,r(4,q)}function ne(u){b=u,r(2,b)}const ae=u=>{r(0,c=u.detail.pageSize),r(1,m=u.detail.page)},re=u=>{r(1,m=u.detail.page)},ie=u=>{r(1,m=u.detail.page)};return i.$$.update=()=>{i.$$.dirty[0]&3&&T(m,c),i.$$.dirty[0]&3&&(e=[fe,m,c])},[c,m,b,Q,q,Z,o,S,I,J,G,ee,de,te,f,x,ne,ae,re,ie]}class jt extends _e{constructor(t){super(),$e(this,t,Ut,Rt,me,{},null,[-1,-1])}}export{jt as component};
