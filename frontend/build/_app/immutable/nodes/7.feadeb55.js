import{s as pe,p as j,J as F,E as Re,a as z,e as Y,c as A,i as b,d,f as W,g as X,h as fe,T as Ge,j as ce,k as Oe,U as Ve,l as K,m as L,x as ve,n as te,O as B,G as Je,V as He,K as le}from"../chunks/scheduler.24659058.js";import{S as me,i as _e,f as G,b as T,d as D,m as S,a as _,t as g,e as E,g as ie,c as re}from"../chunks/index.fb75f0fb.js";import{S as We,M as Xe,I as Ke,D as Ye,a as Ze,T as xe,b as et,N as tt,E as nt,u as at,c as Ae,d as se}from"../chunks/Delete.463ddbcb.js";import{u as Ce}from"../chunks/Close.40a54a06.js";import{C as Ue}from"../chunks/Checkbox.94602e72.js";import{G as Qe,R as Le,b as qe}from"../chunks/Row.9bceb855.js";import{F as it}from"../chunks/FluidForm.b23d58a6.js";import{T as oe,B as ze}from"../chunks/TextInput.f0337baa.js";import{c as ue,b as rt}from"../chunks/index.eacf8113.js";import{T as lt,C as st,P as ot}from"../chunks/ToolbarSearch.d5e94267.js";import{u as Ee}from"../chunks/useMutation.5530db13.js";function Ne(r,e,a){const t=r.slice();return t[21]=e[a],t}function ut(r){let e,a,t;function i(...n){return r[13](r[21],...n)}function s(...n){return r[14](r[21],...n)}return e=new Ue({props:{labelText:r[21].text,checked:r[0].relationType.filter(i).length>0}}),e.$on("check",s),{c(){T(e.$$.fragment),a=z()},l(n){D(e.$$.fragment,n),a=A(n)},m(n,o){S(e,n,o),b(n,a,o),t=!0},p(n,o){r=n;const l={};o&32&&(l.labelText=r[21].text),o&33&&(l.checked=r[0].relationType.filter(i).length>0),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&d(a),E(e,n)}}}function Pe(r){let e,a;return e=new qe({props:{md:!0,$$slots:{default:[ut]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&16777249&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function ft(r){let e,a,t=Ce(r[5]),i=[];for(let n=0;n<t.length;n+=1)i[n]=Pe(Ne(r,t,n));const s=n=>g(i[n],1,1,()=>{i[n]=null});return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=Y()},l(n){for(let o=0;o<i.length;o+=1)i[o].l(n);e=Y()},m(n,o){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(n,o);b(n,e,o),a=!0},p(n,o){if(o&33){t=Ce(n[5]);let l;for(l=0;l<t.length;l+=1){const p=Ne(n,t,l);i[l]?(i[l].p(p,o),_(i[l],1)):(i[l]=Pe(p),i[l].c(),_(i[l],1),i[l].m(e.parentNode,e))}for(ie(),l=t.length;l<i.length;l+=1)s(l);re()}},i(n){if(!a){for(let o=0;o<t.length;o+=1)_(i[o]);a=!0}},o(n){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)g(i[o]);a=!1},d(n){n&&d(e),Ve(i,n)}}}function ct(r){let e,a;return e=new Le({props:{noGutter:!0,$$slots:{default:[ft]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&16777249&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function pt(r){let e,a,t;function i(n){r[16](n)}let s={labelText:"? Khusus",disabled:!r[6]};return r[0].isSpecial!==void 0&&(s.checked=r[0].isSpecial),e=new Ue({props:s}),j.push(()=>G(e,"checked",i)),{c(){T(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,o){S(e,n,o),t=!0},p(n,o){const l={};o&64&&(l.disabled=!n[6]),!a&&o&1&&(a=!0,l.checked=n[0].isSpecial,F(()=>a=!1)),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function mt(r){let e,a,t;function i(n){r[17](n)}let s={labelText:"? Aktif"};return r[0].isActive!==void 0&&(s.checked=r[0].isActive),e=new Ue({props:s}),j.push(()=>G(e,"checked",i)),{c(){T(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,o){S(e,n,o),t=!0},p(n,o){const l={};!a&&o&1&&(a=!0,l.checked=n[0].isActive,F(()=>a=!1)),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function _t(r){let e,a,t,i;return e=new qe({props:{$$slots:{default:[pt]},$$scope:{ctx:r}}}),t=new qe({props:{$$slots:{default:[mt]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment),a=z(),T(t.$$.fragment)},l(s){D(e.$$.fragment,s),a=A(s),D(t.$$.fragment,s)},m(s,n){S(e,s,n),b(s,a,n),S(t,s,n),i=!0},p(s,n){const o={};n&16777281&&(o.$$scope={dirty:n,ctx:s}),e.$set(o);const l={};n&16777217&&(l.$$scope={dirty:n,ctx:s}),t.$set(l)},i(s){i||(_(e.$$.fragment,s),_(t.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),i=!1},d(s){s&&d(a),E(e,s),E(t,s)}}}function dt(r){let e,a;return e=new Le({props:{noGutter:!0,$$slots:{default:[_t]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&16777281&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function gt(r){let e,a,t,i,s,n,o,l,p,f,h,$,k,U,Q,R="Tipe relasi:",N,w,V,I,O,C,J,m,P,H,M,Z;function de(u){r[9](u)}let ne={id:"rel-name",labelText:"Nama",placeholder:"Junaedi",required:!0};r[0].name!==void 0&&(ne.value=r[0].name),e=new oe({props:ne}),j.push(()=>G(e,"value",de));function we(u){r[10](u)}let ge={labelText:"Alamat",placeholder:"e.g. Jl. Graha Sudirman Blok Acasia-4 No. 11 Kel. Lemahmekar"};r[0].street!==void 0&&(ge.value=r[0].street),i=new oe({props:ge}),j.push(()=>G(i,"value",we));function Te(u){r[11](u)}let x={labelText:"Kota",placeholder:"Indramayu",size:"sm"};r[0].city!==void 0&&(x.value=r[0].city),o=new oe({props:x}),j.push(()=>G(o,"value",Te));function De(u){r[12](u)}let $e={labelText:"Telepon/mobile",placeholder:"08999998347",size:"sm"};r[0].phone!==void 0&&($e.value=r[0].phone),f=new oe({props:$e}),j.push(()=>G(f,"value",De)),w=new Qe({props:{$$slots:{default:[ct]},$$scope:{ctx:r}}});function Se(u){r[15](u)}let ae={disabled:!r[6],labelText:"Rayon (Khusus pelanggan)",placeholder:"e.g. Bangkir",size:"sm"};return r[0].region!==void 0&&(ae.value=r[0].region),C=new oe({props:ae}),j.push(()=>G(C,"value",Se)),M=new Qe({props:{$$slots:{default:[dt]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment),t=z(),T(i.$$.fragment),n=z(),T(o.$$.fragment),p=z(),T(f.$$.fragment),$=z(),k=W("div"),U=z(),Q=W("div"),Q.textContent=R,N=z(),T(w.$$.fragment),V=z(),I=W("div"),O=z(),T(C.$$.fragment),m=z(),P=W("div"),H=z(),T(M.$$.fragment),this.h()},l(u){D(e.$$.fragment,u),t=A(u),D(i.$$.fragment,u),n=A(u),D(o.$$.fragment,u),p=A(u),D(f.$$.fragment,u),$=A(u),k=X(u,"DIV",{class:!0}),fe(k).forEach(d),U=A(u),Q=X(u,"DIV",{style:!0,"data-svelte-h":!0}),Ge(Q)!=="svelte-iofmsy"&&(Q.textContent=R),N=A(u),D(w.$$.fragment,u),V=A(u),I=X(u,"DIV",{class:!0}),fe(I).forEach(d),O=A(u),D(C.$$.fragment,u),m=A(u),P=X(u,"DIV",{class:!0}),fe(P).forEach(d),H=A(u),D(M.$$.fragment,u),this.h()},h(){ce(k,"class","divider svelte-16z2047"),Oe(Q,"margin-bottom","3px"),ce(I,"class","divider svelte-16z2047"),ce(P,"class","divider svelte-16z2047")},m(u,y){S(e,u,y),b(u,t,y),S(i,u,y),b(u,n,y),S(o,u,y),b(u,p,y),S(f,u,y),b(u,$,y),b(u,k,y),b(u,U,y),b(u,Q,y),b(u,N,y),S(w,u,y),b(u,V,y),b(u,I,y),b(u,O,y),S(C,u,y),b(u,m,y),b(u,P,y),b(u,H,y),S(M,u,y),Z=!0},p(u,y){const he={};!a&&y&1&&(a=!0,he.value=u[0].name,F(()=>a=!1)),e.$set(he);const be={};!s&&y&1&&(s=!0,be.value=u[0].street,F(()=>s=!1)),i.$set(be);const ke={};!l&&y&1&&(l=!0,ke.value=u[0].city,F(()=>l=!1)),o.$set(ke);const c={};!h&&y&1&&(h=!0,c.value=u[0].phone,F(()=>h=!1)),f.$set(c);const v={};y&16777249&&(v.$$scope={dirty:y,ctx:u}),w.$set(v);const q={};y&64&&(q.disabled=!u[6]),!J&&y&1&&(J=!0,q.value=u[0].region,F(()=>J=!1)),C.$set(q);const ee={};y&16777281&&(ee.$$scope={dirty:y,ctx:u}),M.$set(ee)},i(u){Z||(_(e.$$.fragment,u),_(i.$$.fragment,u),_(o.$$.fragment,u),_(f.$$.fragment,u),_(w.$$.fragment,u),_(C.$$.fragment,u),_(M.$$.fragment,u),Z=!0)},o(u){g(e.$$.fragment,u),g(i.$$.fragment,u),g(o.$$.fragment,u),g(f.$$.fragment,u),g(w.$$.fragment,u),g(C.$$.fragment,u),g(M.$$.fragment,u),Z=!1},d(u){u&&(d(t),d(n),d(p),d($),d(k),d(U),d(Q),d(N),d(V),d(I),d(O),d(m),d(P),d(H)),E(e,u),E(i,u),E(o,u),E(f,u),E(w,u),E(C,u),E(M,u)}}}function Me(r){let e,a;return e=new Ke({props:{status:"active",description:r[0].id===0?"Posting data...":"Updating data..."}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&1&&(s.description=t[0].id===0?"Posting data...":"Updating data..."),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Be(r){let e,a;return e=new Ke({props:{description:r[4],status:"error"}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&16&&(s.description=t[4]),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function $t(r){let e,a,t,i,s;e=new it({props:{$$slots:{default:[gt]},$$scope:{ctx:r}}});let n=r[3]&&Me(r),o=r[2]&&Be(r);return{c(){T(e.$$.fragment),a=z(),n&&n.c(),t=z(),o&&o.c(),i=Y()},l(l){D(e.$$.fragment,l),a=A(l),n&&n.l(l),t=A(l),o&&o.l(l),i=Y()},m(l,p){S(e,l,p),b(l,a,p),n&&n.m(l,p),b(l,t,p),o&&o.m(l,p),b(l,i,p),s=!0},p(l,p){const f={};p&16777313&&(f.$$scope={dirty:p,ctx:l}),e.$set(f),l[3]?n?(n.p(l,p),p&8&&_(n,1)):(n=Me(l),n.c(),_(n,1),n.m(t.parentNode,t)):n&&(ie(),g(n,1,1,()=>{n=null}),re()),l[2]?o?(o.p(l,p),p&4&&_(o,1)):(o=Be(l),o.c(),_(o,1),o.m(i.parentNode,i)):o&&(ie(),g(o,1,1,()=>{o=null}),re())},i(l){s||(_(e.$$.fragment,l),_(n),_(o),s=!0)},o(l){g(e.$$.fragment,l),g(n),g(o),s=!1},d(l){l&&(d(a),d(t),d(i)),E(e,l),n&&n.d(l),o&&o.d(l)}}}function ht(r){let e,a,t;function i(n){r[18](n)}let s={hasForm:!0,preventCloseOnClickOutside:!0,modalHeading:"Relasi",primaryButtonText:"Simpan",primaryButtonIcon:We,secondaryButtonText:"Batal",selectorPrimaryFocus:"#rel-name",size:"sm",primaryButtonDisabled:r[3]||!r[7],$$slots:{default:[$t]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.open=r[1]),e=new Xe({props:s}),j.push(()=>G(e,"open",i)),e.$on("click:button--secondary",r[19]),e.$on("click:button--primary",r[8]),{c(){T(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,o){S(e,n,o),t=!0},p(n,[o]){const l={};o&136&&(l.primaryButtonDisabled=n[3]||!n[7]),o&16777341&&(l.$$scope={dirty:o,ctx:n}),!a&&o&2&&(a=!0,l.open=n[1],F(()=>a=!1)),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function bt(r,e,a){let t,i,{open:s=!1}=e,{data:n}=e,{isError:o=!1}=e,{isUpdating:l=!1}=e,{errorMessage:p=""}=e,{relationTypes:f=[]}=e;const h=Re();function $(){h("submit",{...n,region:t?n.region:void 0,isSpecial:t?n.isSpecial:!1})}function k(m){r.$$.not_equal(n.name,m)&&(n.name=m,a(0,n))}function U(m){r.$$.not_equal(n.street,m)&&(n.street=m,a(0,n))}function Q(m){r.$$.not_equal(n.city,m)&&(n.city=m,a(0,n))}function R(m){r.$$.not_equal(n.phone,m)&&(n.phone=m,a(0,n))}const N=(m,P)=>P===m.id,w=(m,P)=>{if(P.detail)a(0,n={...n,relationType:[...n.relationType,m.id]});else{const H=n.relationType.filter(M=>M!==m.id);a(0,n={...n,relationType:[...H]})}};function V(m){r.$$.not_equal(n.region,m)&&(n.region=m,a(0,n))}function I(m){r.$$.not_equal(n.isSpecial,m)&&(n.isSpecial=m,a(0,n))}function O(m){r.$$.not_equal(n.isActive,m)&&(n.isActive=m,a(0,n))}function C(m){s=m,a(1,s)}const J=()=>a(1,s=!1);return r.$$set=m=>{"open"in m&&a(1,s=m.open),"data"in m&&a(0,n=m.data),"isError"in m&&a(2,o=m.isError),"isUpdating"in m&&a(3,l=m.isUpdating),"errorMessage"in m&&a(4,p=m.errorMessage),"relationTypes"in m&&a(5,f=m.relationTypes)},r.$$.update=()=>{var m;r.$$.dirty&1&&a(6,t=n.relationType.filter(P=>P==="Customer").length>0),r.$$.dirty&65&&a(7,i=n.name.trim().length>0&&n.city.trim().length>0&&n.relationType.length>0&&(t?((m=n.region)==null?void 0:m.trim().length)!==0:!0))},[n,s,o,l,p,f,t,i,$,k,U,Q,R,N,w,V,I,O,C,J]}class kt extends me{constructor(e){super(),_e(this,e,bt,ht,pe,{open:1,data:0,isError:2,isUpdating:3,errorMessage:4,relationTypes:5})}}function Ie(r){let e,a;return{c(){e=K(r[0]),a=K(" - ")},l(t){e=L(t,r[0]),a=L(t," - ")},m(t,i){b(t,e,i),b(t,a,i)},p(t,i){i&1&&te(e,t[0])},d(t){t&&(d(e),d(a))}}}function je(r){let e,a;return{c(){e=K(", "),a=K(r[2])},l(t){e=L(t,", "),a=L(t,r[2])},m(t,i){b(t,e,i),b(t,a,i)},p(t,i){i&4&&te(a,t[2])},d(t){t&&(d(e),d(a))}}}function yt(r){let e,a,t=r[0]!==""&&Ie(r),i=r[2]!==""&&je(r);return{c(){e=W("span"),t&&t.c(),a=K(r[1]),i&&i.c()},l(s){e=X(s,"SPAN",{});var n=fe(e);t&&t.l(n),a=L(n,r[1]),i&&i.l(n),n.forEach(d)},m(s,n){b(s,e,n),t&&t.m(e,null),ve(e,a),i&&i.m(e,null)},p(s,[n]){s[0]!==""?t?t.p(s,n):(t=Ie(s),t.c(),t.m(e,a)):t&&(t.d(1),t=null),n&2&&te(a,s[1]),s[2]!==""?i?i.p(s,n):(i=je(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:B,o:B,d(s){s&&d(e),t&&t.d(),i&&i.d()}}}function vt(r,e,a){let{street:t=""}=e,{city:i}=e,{phone:s=""}=e;return r.$$set=n=>{"street"in n&&a(0,t=n.street),"city"in n&&a(1,i=n.city),"phone"in n&&a(2,s=n.phone)},[t,i,s]}class wt extends me{constructor(e){super(),_e(this,e,vt,yt,pe,{street:0,city:1,phone:2})}}function Tt(r){let e,a;return e=new ze({props:{skeleton:r[0],tooltipPosition:"top",tooltipAlignment:"end",size:"small",kind:"danger-ghost",icon:Ye,iconDescription:"Delete"}}),e.$on("click",r[3]),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,[i]){const s={};i&1&&(s.skeleton=t[0]),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Dt(r,e,a){const t=Re();let{idData:i=0}=e,{isDeleting:s=!1}=e;function n(){a(0,s=!0),setTimeout(()=>{t("deleteData",i)},250)}const o=()=>n();return r.$$set=l=>{"idData"in l&&a(2,i=l.idData),"isDeleting"in l&&a(0,s=l.isDeleting)},[s,n,i,o]}class St extends me{constructor(e){super(),_e(this,e,Dt,Tt,pe,{idData:2,isDeleting:0})}}function Et(r){let e;return{c(){e=K("Buat baru")},l(a){e=L(a,"Buat baru")},m(a,t){b(a,e,t)},d(a){a&&d(e)}}}function qt(r){let e,a,t,i,s,n,o;function l(f){r[9](f)}let p={placeholder:"nama, alamat, kota, no. telp"};return r[3]!==void 0&&(p.value=r[3]),e=new lt({props:p}),j.push(()=>G(e,"value",l)),e.$on("change",r[10]),e.$on("clear",r[11]),i=new st({props:{class:"relation",size:"sm",type:"inline",placeholder:"Tipe relasi",items:r[2]}}),i.$on("select",r[12]),i.$on("clear",r[13]),n=new ze({props:{icon:tt,$$slots:{default:[Et]},$$scope:{ctx:r}}}),n.$on("click",r[14]),{c(){T(e.$$.fragment),t=z(),T(i.$$.fragment),s=z(),T(n.$$.fragment)},l(f){D(e.$$.fragment,f),t=A(f),D(i.$$.fragment,f),s=A(f),D(n.$$.fragment,f)},m(f,h){S(e,f,h),b(f,t,h),S(i,f,h),b(f,s,h),S(n,f,h),o=!0},p(f,h){const $={};!a&&h&8&&(a=!0,$.value=f[3],F(()=>a=!1)),e.$set($);const k={};h&4&&(k.items=f[2]),i.$set(k);const U={};h&131072&&(U.$$scope={dirty:h,ctx:f}),n.$set(U)},i(f){o||(_(e.$$.fragment,f),_(i.$$.fragment,f),_(n.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i.$$.fragment,f),g(n.$$.fragment,f),o=!1},d(f){f&&(d(t),d(s)),E(e,f),E(i,f),E(n,f)}}}function Rt(r){let e,a;return e=new et({props:{$$slots:{default:[qt]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&131084&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Ut(r){let e,a;return e=new xe({props:{size:"sm",$$slots:{default:[Rt]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&131084&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function zt(r){let e=r[16].value+"",a;return{c(){a=K(e)},l(t){a=L(t,e)},m(t,i){b(t,a,i)},p(t,i){i&65536&&e!==(e=t[16].value+"")&&te(a,e)},i:B,o:B,d(t){t&&d(a)}}}function At(r){let e=(r[16].value??"")+"",a;return{c(){a=K(e)},l(t){a=L(t,e)},m(t,i){b(t,a,i)},p(t,i){i&65536&&e!==(e=(t[16].value??"")+"")&&te(a,e)},i:B,o:B,d(t){t&&d(a)}}}function Ct(r){let e=r[16].value.join(", ")+"",a;return{c(){a=K(e)},l(t){a=L(t,e)},m(t,i){b(t,a,i)},p(t,i){i&65536&&e!==(e=t[16].value.join(", ")+"")&&te(a,e)},i:B,o:B,d(t){t&&d(a)}}}function Qt(r){let e,a;return e=new wt({props:{street:r[15].street,city:r[15].city,phone:r[15].phone}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,i){const s={};i&32768&&(s.street=t[15].street),i&32768&&(s.city=t[15].city),i&32768&&(s.phone=t[15].phone),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Nt(r){let e,a,t,i;function s(){return r[7](r[15])}return e=new ze({props:{tooltipPosition:"left",tooltipAlignment:"end",size:"small",kind:"ghost",iconDescription:"Edit",icon:nt}}),e.$on("click",s),t=new St({props:{idData:r[15].id,isDeleting:r[1]}}),t.$on("deleteData",r[8]),{c(){T(e.$$.fragment),a=z(),T(t.$$.fragment)},l(n){D(e.$$.fragment,n),a=A(n),D(t.$$.fragment,n)},m(n,o){S(e,n,o),b(n,a,o),S(t,n,o),i=!0},p(n,o){r=n;const l={};o&32768&&(l.idData=r[15].id),o&2&&(l.isDeleting=r[1]),t.$set(l)},i(n){i||(_(e.$$.fragment,n),_(t.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),i=!1},d(n){n&&d(a),E(e,n),E(t,n)}}}function Pt(r){let e,a,t,i;const s=[Nt,Qt,Ct,At,zt],n=[];function o(l,p){return l[16].key==="cmd"?0:l[16].key==="street"?1:l[16].key==="relationType"?2:l[16].key==="region"?3:4}return e=o(r),a=n[e]=s[e](r),{c(){a.c(),t=Y()},l(l){a.l(l),t=Y()},m(l,p){n[e].m(l,p),b(l,t,p),i=!0},p(l,p){let f=e;e=o(l),e===f?n[e].p(l,p):(ie(),g(n[f],1,1,()=>{n[f]=null}),re(),a=n[e],a?a.p(l,p):(a=n[e]=s[e](l),a.c()),_(a,1),a.m(t.parentNode,t))},i(l){i||(_(a),i=!0)},o(l){g(a),i=!1},d(l){l&&d(t),n[e].d(l)}}}function Mt(r){let e,a;return e=new Ze({props:{zebra:!0,size:"short",title:"Relasi",description:"Tabel data pelanggan, sales, supplier, dan karyawan",headers:r[5],rows:r[0],$$slots:{cell:[Pt,({row:t,cell:i})=>({15:t,16:i}),({row:t,cell:i})=>(t?32768:0)|(i?65536:0)],default:[Ut]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,i){S(e,t,i),a=!0},p(t,[i]){const s={};i&1&&(s.rows=t[0]),i&229390&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){a||(_(e.$$.fragment,t),a=!0)},o(t){g(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Bt(r,e,a){const t=Re();let{data:i=[]}=e,{isUpdating:s=!1}=e,{relationTypes:n=[]}=e,o=[{key:"name",value:"Nama",width:"25%"},{key:"street",value:"Alamat",width:"auto"},{key:"region",value:"Rayon",width:"80px"},{key:"relationType",value:"Tipe",width:"100px"},{key:"cmd",value:"",width:"120px"}];function l(w){t("edit",w)}let p;const f=w=>l(w.id);function h(w){Je.call(this,r,w)}function $(w){p=w,a(3,p)}const k=()=>t("change_search",p),U=()=>t("change_search",null),Q=w=>t("changeType",w.detail.selectedId),R=()=>t("changeType",null),N=()=>l(0);return r.$$set=w=>{"data"in w&&a(0,i=w.data),"isUpdating"in w&&a(1,s=w.isUpdating),"relationTypes"in w&&a(2,n=w.relationTypes)},[i,s,n,p,t,o,l,f,h,$,k,U,Q,R,N]}class It extends me{constructor(e){super(),_e(this,e,Bt,Mt,pe,{data:0,isUpdating:1,relationTypes:2})}}function Fe(r){let e,a,t;function i(n){r[21](n)}let s={data:r[5],errorMessage:r[3],relationTypes:r[7].data};return r[4]!==void 0&&(s.open=r[4]),e=new kt({props:s}),j.push(()=>G(e,"open",i)),e.$on("submit",r[13]),{c(){T(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,o){S(e,n,o),t=!0},p(n,o){const l={};o[0]&32&&(l.data=n[5]),o[0]&8&&(l.errorMessage=n[3]),o[0]&128&&(l.relationTypes=n[7].data),!a&&o[0]&16&&(a=!0,l.open=n[4],F(()=>a=!1)),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function jt(r){let e,a,t,i,s;function n(l){r[22](l)}let o={data:r[6].data.data,relationTypes:r[7].data};return r[2]!==void 0&&(o.isUpdating=r[2]),e=new It({props:o}),j.push(()=>G(e,"isUpdating",n)),e.$on("edit",r[12]),e.$on("deleteData",r[14]),e.$on("changeType",r[16]),e.$on("change_search",r[17]),i=new ot({props:{totalItems:r[6].data.totalItems,pageSizes:r[8],pageSize:r[0],page:r[1]}}),i.$on("update",r[23]),i.$on("click:button--next",r[24]),i.$on("click:button--previous",r[25]),{c(){T(e.$$.fragment),t=z(),T(i.$$.fragment)},l(l){D(e.$$.fragment,l),t=A(l),D(i.$$.fragment,l)},m(l,p){S(e,l,p),b(l,t,p),S(i,l,p),s=!0},p(l,p){const f={};p[0]&64&&(f.data=l[6].data.data),p[0]&128&&(f.relationTypes=l[7].data),!a&&p[0]&4&&(a=!0,f.isUpdating=l[2],F(()=>a=!1)),e.$set(f);const h={};p[0]&64&&(h.totalItems=l[6].data.totalItems),p[0]&1&&(h.pageSize=l[0]),p[0]&2&&(h.page=l[1]),i.$set(h)},i(l){s||(_(e.$$.fragment,l),_(i.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),g(i.$$.fragment,l),s=!1},d(l){l&&d(t),E(e,l),E(i,l)}}}function Ft(r){let e,a,t=r[6].error.message+"",i;return{c(){e=W("span"),a=K("Error: "),i=K(t)},l(s){e=X(s,"SPAN",{});var n=fe(e);a=L(n,"Error: "),i=L(n,t),n.forEach(d)},m(s,n){b(s,e,n),ve(e,a),ve(e,i)},p(s,n){n[0]&64&&t!==(t=s[6].error.message+"")&&te(i,t)},i:B,o:B,d(s){s&&d(e)}}}function Gt(r){let e,a="Loading...";return{c(){e=W("span"),e.textContent=a},l(t){e=X(t,"SPAN",{"data-svelte-h":!0}),Ge(e)!=="svelte-omrbt4"&&(e.textContent=a)},m(t,i){b(t,e,i)},p:B,i:B,o:B,d(t){t&&d(e)}}}function Kt(r){let e,a,t,i,s,n,o,l=r[4]&&Fe(r);const p=[Gt,Ft,jt],f=[];function h($,k){return $[6].isLoading?0:$[6].isError?1:$[6].isSuccess?2:-1}return~(i=h(r))&&(s=f[i]=p[i](r)),{c(){e=W("meta"),a=z(),l&&l.c(),t=z(),s&&s.c(),n=Y(),this.h()},l($){const k=He("svelte-l591zo",document.head);e=X(k,"META",{name:!0,content:!0}),k.forEach(d),a=A($),l&&l.l($),t=A($),s&&s.l($),n=Y(),this.h()},h(){document.title="Relasi",ce(e,"name","description"),ce(e,"content","Relation this app")},m($,k){ve(document.head,e),b($,a,k),l&&l.m($,k),b($,t,k),~i&&f[i].m($,k),b($,n,k),o=!0},p($,k){$[4]?l?(l.p($,k),k[0]&16&&_(l,1)):(l=Fe($),l.c(),_(l,1),l.m(t.parentNode,t)):l&&(ie(),g(l,1,1,()=>{l=null}),re());let U=i;i=h($),i===U?~i&&f[i].p($,k):(s&&(ie(),g(f[U],1,1,()=>{f[U]=null}),re()),~i?(s=f[i],s?s.p($,k):(s=f[i]=p[i]($),s.c()),_(s,1),s.m(n.parentNode,n)):s=null)},i($){o||(_(l),_(s),o=!0)},o($){g(l),g(s),o=!1},d($){$&&(d(a),d(t),d(n)),d(e),l&&l.d($),~i&&f[i].d($)}}}let ye="relations";function Lt(r,e,a){let t,i,s,n,o,l;const p=`${rt}/relations`;let f=5,h=1,$=[3,5,10,25,50],k=0,U,Q;const R=at();let N=!1,w="";async function V(){const c={method:"GET",credentials:ue},v=new Request(`${p}/list/types`,c);return await(await fetch(v)).json()}async function I(c){{const v={headers:{"content-type":"application/json"},method:"GET",credentials:ue},q=new Request(`${p}?page=${c}&limit=${f}&opt=${k}${k===1?`&txt=${Q}`:""}${k===2?`&reltype=${U}`:""}`,v);return await(await fetch(q)).json()}}const O=c=>{h<c.totalPages&&R.prefetchQuery([ye,h+1,f],()=>I(h+1))};let C=!1,J={id:0,name:"",city:"",isActive:!0,isSpecial:!1,relationType:["Customer"],createdAt:"",updatedAt:""};const m=async c=>{const v=new Request(p,{headers:{"content-type":"application/json"},body:JSON.stringify(c),method:"POST",credentials:ue});return await(await fetch(v)).json()},P=async c=>{const v=new Request(`${p}/${c.id}`,{headers:{"content-type":"application/json"},body:JSON.stringify(c),method:"PUT",credentials:ue});return await(await fetch(v)).json()},H=async c=>{const v=new Request(`${p}/${c}`,{method:"DELETE",credentials:ue});return await(await fetch(v)).json()},M=Ee(m,{onMutate:async c=>{await R.cancelQueries();const v=R.getQueryData(t);return v&&R.setQueryData(t,v),v},onSuccess:async(c,v,q)=>{q&&(a(2,N=!1),c.status!=="fail"?a(4,C=!1):a(3,w=c.message))},onError:(c,v,q)=>{console.log(c),q!=null&&q.previousData&&R.setQueryData(t,q.previousData)},onSettled:async()=>{await R.invalidateQueries(t)}});le(r,M,c=>a(32,n=c));const Z=Ee(P,{onMutate:async c=>{await R.cancelQueries();const v=R.getQueryData(t);return v&&R.setQueryData(t,v),v},onSuccess:async(c,v,q)=>{q&&(a(2,N=!1),c.status!=="fail"?a(4,C=!1):a(3,w=c.message))},onError:(c,v,q)=>{q!=null&&q.previousRelation&&R.setQueryData(t,q.previousRelation)},onSettled:async()=>{await R.invalidateQueries(t)}});le(r,Z,c=>a(31,s=c));const de=Ee(H,{onMutate:async c=>{await R.cancelQueries();const v=R.getQueryData(t);return v&&R.setQueryData(t,v),v},onSuccess:async()=>{a(2,N=!1)},onError:(c,v,q)=>{q!=null&&q.previousRelation&&R.setQueryData(t,q.previousRelation)},onSettled:async c=>{c.status==="fail"&&a(3,w=c.message),await R.invalidateQueries(t),a(2,N=!1)}});le(r,de,c=>a(30,i=c));let ne={...J};function we(c){var v;if(c.detail===0)a(5,ne={...J}),a(4,C=!0);else{let q=(v=o.data)==null?void 0:v.data.filter(ee=>ee.id===c.detail)[0];q&&(a(5,ne={...q}),a(4,C=!0))}}function ge(c){a(2,N=!0),c.detail.id===0?n.mutate(c.detail):s.mutate(c.detail)}function Te(c){i.mutate(c.detail)}const x=Ae({queryKey:[ye,h,f],keepPreviousData:!0,enabled:se,queryFn:async()=>await I(h),onSuccess:O});le(r,x,c=>a(6,o=c));function De(c,v,q,ee){x.setOptions({queryKey:[ye,c,v,q,ee],keepPreviousData:!0,queryFn:async()=>await I(h),onSuccess:O,enabled:se})}function $e(c){a(19,U=c.detail),c.detail?k=2:k=0}function Se(c){a(20,Q=c.detail),c.detail?k=1:k=0}const ae=Ae("relTypes",V,{enabled:se});le(r,ae,c=>a(7,l=c));function u(c){C=c,a(4,C)}function y(c){N=c,a(2,N)}const he=c=>{a(0,f=c.detail.pageSize),a(1,h=c.detail.page)},be=c=>{a(1,h=c.detail.page)},ke=c=>{a(1,h=c.detail.page)};return r.$$.update=()=>{r.$$.dirty[0]&1572867&&(t=[ye,h,f,U,Q]),r.$$.dirty[0]&1572867&&De(h,f,U,Q)},ae.setEnabled(se),x.setEnabled(se),[f,h,N,w,C,ne,o,l,$,M,Z,de,we,ge,Te,x,$e,Se,ae,U,Q,u,y,he,be,ke]}class nn extends me{constructor(e){super(),_e(this,e,Lt,Kt,pe,{},null,[-1,-1])}}export{nn as component};
